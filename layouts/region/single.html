{{ define "header" }}
   {{/* We can override any block in the baseof file be defining it in the template */}}
  {{ partial "page-header.html" . }}
{{ end }}

{{ define "main" }}

  {{ $section := .Site.GetPage "section" .Section }}
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
        {{ with .CurrentSection.Title }}{{ . | upper }}{{ end }}
      </p>
      <h1 class="f1 athelas mb1">
        {{- .Title -}}
      </h1>
      {{/* Hugo uses Go's date formatting is set by example. Here are two formats */}}
      <time class="f6 mv4 dib tracked" datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
        {{- .Date.Format "January 2, 2006" -}}
      </time>
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-100">
        <div id="mapid" class='w-100 center' style="height: 95vh;"></div>
        <script type="text/javascript" src="/tbassets/leaflet.js"></script>
        <script type="text/javascript">
            var datasource = "{{ .Params.datasource }}";
        </script>
        <script type="text/javascript" src="{{ .Params.datasource }}/map_data.js"></script>
        <script type="text/javascript" src="{{ .Params.datasource }}/data.js"></script>
        <script type="text/javascript" src="/tbassets/map.js"></script>

        {{- .Content -}}
    </section>

    <aside class="w-30-l mt6-l">
      {{- partial "menu-contextual.html" . -}}
    </aside>

  </article>
{{ end }}
